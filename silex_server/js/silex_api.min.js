var silexNS;if(!silexNS)silexNS=new Object;silexNS.SilexAPIClass=function(){this.SilexAPIClass();}
silexNS.SilexAPIClass.prototype={silexBrowserZoom:1,jsFilesToInclude:[],jsFilesIncluded:[],onScriptsLoadedCallbacksArray:[],isLoadingScripts:false,scaleMode:"noScale",siteWidth:1,siteHeight:1,flashStageWidth:1,flashStageHeight:1,SilexAPIClass:function(){},__SilexAPIClass:function(){},checkCompatibility:function(ia,ja,ka,la){if(ka.indexOf("/")==0)ka=ka.substring(1);if(ka!=''){$ca=ka.indexOf('/');$da=ka.substring(0,$ca);if($da!=ia){$ea=$da;$fa=ka.substring($ca+1);if($ea==this.defaultWebsite){$ga=la;}else{$ga=la+"?/"+$ea+"/";}
if($fa!="")$ga+='#/'+$fa;window.location=$ga;return false;}}
return true;},loadAs2AdminApi:function(){document.getElementById('silex').SetVariable('silex_exec_str','load_clip:silex_admin_api.swf,plugins');},loadJsAdminApi:function(){silexNS.SilexApi.addScript(javascriptFolderUrl+"silex_admin_api.min.js");silexNS.SilexApi.includeJSSCripts();},addScript:function(ma){this.jsFilesToInclude.push(ma);},includeJSSCripts:function(na){if(na){this.onScriptsLoadedCallbacksArray.push(na);}
if(this.isLoadingScripts==false){var oa=this.jsFilesToInclude.shift();this.jsFilesIncluded[oa]=true;this.isLoadingScripts=true;this._includeNextScript(oa);}},_includeNextScript:function(pa){var qa=this;this._includeSilexScript(pa,function(){var ra;var sa=false;if(qa.jsFilesToInclude.length>0){ra=qa.jsFilesToInclude.shift();while(qa.jsFilesToInclude.length>0&&qa.jsFilesIncluded[ra]&&qa.jsFilesIncluded[ra]==true){ra=qa.jsFilesToInclude.shift();}
if(!qa.jsFilesIncluded[ra]||qa.jsFilesIncluded[ra]==false){sa=true;}}
if(sa){qa.jsFilesIncluded[ra]=true;qa._includeNextScript(ra);}
else{qa.isLoadingScripts=false;while(qa.onScriptsLoadedCallbacksArray.length>0){var ta=qa.onScriptsLoadedCallbacksArray.shift();if(ta)ta();}}});},_includeSilexScript:function(ua,va){var wa=document.createElement("script");wa.setAttribute("type","text/javascript");wa.setAttribute("language","JavaScript");wa.setAttribute("src",ua);wa.onload=va;wa.onreadystatechange=function(){if(this.readyState=='loaded'||this.readyState=='complete')va();}
document.getElementsByTagName("head")[0].appendChild(wa);},setScaleMode:function(xa,ya,za,Aa,Ba){this.scaleMode=xa;this.siteWidth=ya;this.siteHeight=za;this.silexBrowserZoom=this.siteHeight/$('#silex').height();this.resize();},updateFlashStageSize:function(Ca,Da){this.flashStageWidth=Ca;this.flashStageHeight=Da;this.resize();},resize:function(){var Ea;var Fa;var Ga;var Ha=($('#silexScene').width()>this.siteWidth);var Ia=($('#silexScene').height()>this.siteHeight);if(this.scaleMode==undefined)silexNS.SilexApi.resize();switch(this.scaleMode){case "noScale":case "noscale":Ea={'overflow':'hidden'};if(Ha){Ga="100%";Ea={'overflow':'auto'};}
else Ga=this.siteWidth+"px";if(Ia){Fa="100%";Ea={'overflow':'auto'};}
else Fa=this.siteHeight+"px";break;case "showAll":case "showall":Ga="100%";Fa="100%";Ea={'overflow':'hidden'};break;case "scroll":Ea={'overflow':'hidden'};if(Ha){Ga="100%";Ea={'overflow':'auto'};}
else{Ga=this.siteWidth+"px";}
if($('#silexScene').height()>this.flashStageHeight){Fa="100%";Ea={'overflow':'auto'};}
else Fa=this.flashStageHeight+"px";break;case "pixel":Ga="100%";Fa="100%";Ea={'overflow':'hidden'};break;}$('#silex').width(Ga);$('#silex').height(Fa);silexNS.HookManager.callHooks({type:'bodyResize'});}}
silexNS.SilexApi=new silexNS.SilexAPIClass();silexNS.HookManager.addHook("wysiwygLoginSuccess",silexNS.SilexApi.loadAs2AdminApi);silexNS.HookManager.addHook("org.silex.adminApi.SilexAdminApi.adminApiLoad.START",silexNS.SilexApi.loadJsAdminApi);silexNS.HookManager.addHook("refreshWorkspace",function(){silexNS.SilexApi.resize();});